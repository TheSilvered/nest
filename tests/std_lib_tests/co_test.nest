|#| '../test_lib.nest' = test
|#| 'stdco.nest' = co

#f self a b [
    a b + = v
    self v @co.pause
    => 3 v +
]

f @co.create = f_co

f_co @co.get_state co.STATE.suspended @test.assert_eq
{ f_co, 1, 2 } f_co @co.call 3 @test.assert_eq

f_co @co.get_state co.STATE.paused @test.assert_eq
{ f_co, 1, 2 } f_co @co.call 6 @test.assert_eq

f_co @co.get_state co.STATE.ended @test.assert_eq

f { f_co, 1, 2 } @test.assert_raises_error

#g self [
    self 1 @co.pause
    self 2 @co.pause
    self 3 @co.pause
]

g @co.create = g_co

Array :: (g_co @co.generator) { 1, 2, 3 } @test.assert_eq
