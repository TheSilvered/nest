|#| '../test_lib.nest' = test
|#| 'stditutil.nest' = itu

{ 'a': 1, 'b': 2, 'c': 3 } = m

{ { 10 3 @itu.repeat, '101010' },
  { { { 1, 2 }, Array :: 'Hi' } @itu.chain, '12Hi' },
  { { 1, 2, 3 } 'Hi' @itu.zip, "{ 1, 'H' }{ 2, 'i' }" },
  { 'Hello' @itu.enumerate, "{ 0, 'H' }{ 1, 'e' }{ 2, 'l' }{ 3, 'l' }{ 4, 'o' }" },
  { m @itu.keys, 'abc' },
  { m @itu.values, '123' },
  { m @itu.items, "{ 'a', 1 }{ 'b', 2 }{ 'c', 3 }" },
  { 'Hello' @itu.reversed, 'olleH' } } = iterators

{ { 10 2 @itu.count, '101214161820', 5 },
  { 'Hi!' @itu.cycle, 'Hi!Hi!H', 6 } } = infinite_iterators

... Iter :: infinite_iterators ~= i [
    '' = s
    0 = count

    ... i.0 ~= j [
        j ><= s

        1 += count i.2 > ? ;
    ]

    s i.1 @test.assert_eq
]

... Iter :: iterators ~= i [
    '' = s
    ... i.0 ~= j [ j ><= s ]
    s i.1 @test.assert_eq
]
